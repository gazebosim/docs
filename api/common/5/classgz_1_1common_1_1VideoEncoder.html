<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="keywords" content="Gazebo Common">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Gazebo Common: VideoEncoder Class Reference</title>
    <script type="text/javascript" src="https://gazebosim.org/assets/doxygen/dynsections.js"></script>
    <script type="text/javascript" src="jquery.js"></script>
    <link rel="icon" type="image/x-icon" href="https://gazebosim.org/assets/icon/favicon.ico">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,300,100,500,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.deep_orange-blue.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"> </script>
    <link href="https://gazebosim.org/assets/doxygen/doxygen.css" rel="stylesheet" type="text/css">
  </head>
    <script type="text/javascript">
      /* Replace all the "permalink" &#9670;&nbsp; icons with a unicode link
        symbol.*/
      $(document).ready(function() {
        var elems = document.getElementsByClassName("permalink");
        for (var i = 0; i < elems.length; ++i) {
          elems[i].firstChild.innerHTML="&#x1f517;";
          elems[i].firstChild.style.fontSize="18px";
        }
      });
    </script>
  </head>
<body>
  <div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer">
    <div class="mdl-layout__drawer mdl-color--grey-100 mdl-color-text--blue-grey-50">
      <header class="mdl-color--grey-100">
        <a href="index.html"><img width="60px" src="https://gazebosim.org/assets/doxygen/gazebo_logo.svg"/></a>
        <h1 class="project_title">Gazebo Common</h1>
        <h2>API Reference</h2>
        <div class="version">
        5.6.0
        </div>
      </header>
      <!-- NOTE: If you add a link to a doxygen generated page, then make
                 sure to update the required_html_fils list in
                 GzCreateDocs.cmake -->
      <nav class="gz-navigation mdl-navigation">
        <a class="mdl-navigation__link" href="tutorials.html">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">insert_drive_file</i>Tutorials</a>
        <a id="class_menu" class="mdl-navigation__link" href="#">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">library_books</i>Classes</a>
        <a id="namespaces_menu"class="mdl-navigation__link" href="#">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">toc</i>Namespaces</a>
        <a class="mdl-navigation__link" href="files.html">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">insert_drive_file</i>Files</a>
        <a class="mdl-navigation__link" target="_blank"
           href="http://gazebosim.org">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">launch</i>Gazebo Website</a>
      </nav>
      <!-- classes sub menu -->
      <ul for="class_menu" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect mdl-navigation">
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link" href="classes.html">Index</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="annotated.html">List</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="hierarchy.html">Hierarchy</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions.html">Members: All</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_func.html">Members: Functions</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_vars.html">Members: Variables</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_type.html">Members: Typedefs</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_enum.html">Members: Enumerations</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_eval.html">Members: Enumerator</a>
        </li>
      </ul>
      <!-- namespaces sub menu -->
      <ul for="namespaces_menu" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect mdl-navigation">
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespaces.html">List</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers.html">Members</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_func.html">Functions</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_type.html">Typedefs</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_vars.html">Variables</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_enum.html">Enumerations</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_eval.html">Enumerator</a>
        </li>
      </ul>
    </div>
    <main class="mdl-layout__content mdl-color--white">
    <div id="top">
<!-- Generated by Doxygen 1.8.17 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegz.html">gz</a></li><li class="navelem"><a class="el" href="namespacegz_1_1common.html">common</a></li><li class="navelem"><a class="el" href="classgz_1_1common_1_1VideoEncoder.html">VideoEncoder</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="classgz_1_1common_1_1VideoEncoder-members.html">List of all members</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">VideoEncoder Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="classgz_1_1common_1_1VideoEncoder.html" title="The VideoEncoder class supports encoding a series of images to a video format, and then writing the v...">VideoEncoder</a> class supports encoding a series of images to a video format, and then writing the video to disk.  
 <a href="classgz_1_1common_1_1VideoEncoder.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="gz_2common_2VideoEncoder_8hh_source.html">VideoEncoder.hh</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af83b198525abac80066e954c64c3be68"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgz_1_1common_1_1VideoEncoder.html#af83b198525abac80066e954c64c3be68">VideoEncoder</a> ()</td></tr>
<tr class="memdesc:af83b198525abac80066e954c64c3be68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="classgz_1_1common_1_1VideoEncoder.html#af83b198525abac80066e954c64c3be68">More...</a><br /></td></tr>
<tr class="separator:af83b198525abac80066e954c64c3be68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a195811223cc0390d762c9abaa5a8c1e1"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgz_1_1common_1_1VideoEncoder.html#a195811223cc0390d762c9abaa5a8c1e1">~VideoEncoder</a> ()</td></tr>
<tr class="memdesc:a195811223cc0390d762c9abaa5a8c1e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="classgz_1_1common_1_1VideoEncoder.html#a195811223cc0390d762c9abaa5a8c1e1">More...</a><br /></td></tr>
<tr class="separator:a195811223cc0390d762c9abaa5a8c1e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5344a8e4273b5570d9200195690d134e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgz_1_1common_1_1VideoEncoder.html#a5344a8e4273b5570d9200195690d134e">AddFrame</a> (const unsigned char *_frame, const unsigned int _width, const unsigned int _height)</td></tr>
<tr class="memdesc:a5344a8e4273b5570d9200195690d134e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a single frame to be encoded.  <a href="classgz_1_1common_1_1VideoEncoder.html#a5344a8e4273b5570d9200195690d134e">More...</a><br /></td></tr>
<tr class="separator:a5344a8e4273b5570d9200195690d134e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50eaf0e74369d57c572fa2e9e353d583"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgz_1_1common_1_1VideoEncoder.html#a50eaf0e74369d57c572fa2e9e353d583">AddFrame</a> (const unsigned char *_frame, const unsigned int _width, const unsigned int _height, const std::chrono::steady_clock::time_point &amp;_timestamp)</td></tr>
<tr class="memdesc:a50eaf0e74369d57c572fa2e9e353d583"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a single timestamped frame to be encoded.  <a href="classgz_1_1common_1_1VideoEncoder.html#a50eaf0e74369d57c572fa2e9e353d583">More...</a><br /></td></tr>
<tr class="separator:a50eaf0e74369d57c572fa2e9e353d583"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a901a5cf7dc5b49115dfa4cbbb7dfec1e"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgz_1_1common_1_1VideoEncoder.html#a901a5cf7dc5b49115dfa4cbbb7dfec1e">BitRate</a> () const</td></tr>
<tr class="memdesc:a901a5cf7dc5b49115dfa4cbbb7dfec1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the bit rate.  <a href="classgz_1_1common_1_1VideoEncoder.html#a901a5cf7dc5b49115dfa4cbbb7dfec1e">More...</a><br /></td></tr>
<tr class="separator:a901a5cf7dc5b49115dfa4cbbb7dfec1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f28e2eca22071b9089e92d34ced1f31"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgz_1_1common_1_1VideoEncoder.html#a9f28e2eca22071b9089e92d34ced1f31">Format</a> () const</td></tr>
<tr class="memdesc:a9f28e2eca22071b9089e92d34ced1f31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the encoding format.  <a href="classgz_1_1common_1_1VideoEncoder.html#a9f28e2eca22071b9089e92d34ced1f31">More...</a><br /></td></tr>
<tr class="separator:a9f28e2eca22071b9089e92d34ced1f31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bdfc5030c1af4342663ece91329f6d5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgz_1_1common_1_1VideoEncoder.html#a0bdfc5030c1af4342663ece91329f6d5">IsEncoding</a> () const</td></tr>
<tr class="memdesc:a0bdfc5030c1af4342663ece91329f6d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if the enoder has been started, false otherwise.  <a href="classgz_1_1common_1_1VideoEncoder.html#a0bdfc5030c1af4342663ece91329f6d5">More...</a><br /></td></tr>
<tr class="separator:a0bdfc5030c1af4342663ece91329f6d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a372de693ad40b3f42839c8ec6ac845f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgz_1_1common_1_1VideoEncoder.html#a372de693ad40b3f42839c8ec6ac845f4">Reset</a> ()</td></tr>
<tr class="memdesc:a372de693ad40b3f42839c8ec6ac845f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset to default video properties and clean up allocated memory. This will also delete any temporary files.  <a href="classgz_1_1common_1_1VideoEncoder.html#a372de693ad40b3f42839c8ec6ac845f4">More...</a><br /></td></tr>
<tr class="separator:a372de693ad40b3f42839c8ec6ac845f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76865d64e4b5fe2a7a0c8544fab5f9e6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgz_1_1common_1_1VideoEncoder.html#a76865d64e4b5fe2a7a0c8544fab5f9e6">SaveToFile</a> (const <a class="elRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> &amp;_filename)</td></tr>
<tr class="memdesc:a76865d64e4b5fe2a7a0c8544fab5f9e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write the video to disk param[in] _filename File in which to save the encoded data.  <a href="classgz_1_1common_1_1VideoEncoder.html#a76865d64e4b5fe2a7a0c8544fab5f9e6">More...</a><br /></td></tr>
<tr class="separator:a76865d64e4b5fe2a7a0c8544fab5f9e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55e3737a078bb44592d4297ba82bac58"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgz_1_1common_1_1VideoEncoder.html#a55e3737a078bb44592d4297ba82bac58">Start</a> (const <a class="elRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> &amp;_format, const <a class="elRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> &amp;_filename, const unsigned int _width, const unsigned int _height, const unsigned int _fps, const unsigned int _bitRate, const bool _allowHwAccel)</td></tr>
<tr class="memdesc:a55e3737a078bb44592d4297ba82bac58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the encoder. This should be called once. Add new frames to the video using the AddFrame function. Use SaveToFile when the video is complete.  <a href="classgz_1_1common_1_1VideoEncoder.html#a55e3737a078bb44592d4297ba82bac58">More...</a><br /></td></tr>
<tr class="separator:a55e3737a078bb44592d4297ba82bac58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab409f17ea63714c450e2befaaa3a7eb7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgz_1_1common_1_1VideoEncoder.html#ab409f17ea63714c450e2befaaa3a7eb7">Start</a> (const <a class="elRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> &amp;_format, const <a class="elRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> &amp;_filename, unsigned int _width, unsigned int _height, unsigned int _fps, unsigned int _bitRate, const <a class="el" href="classgz_1_1common_1_1FlagSet.html">FlagSet</a>&lt; HWEncoderType &gt; &amp;_allowedHwAccel, const <a class="elRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> &amp;_hwAccelDevice=&quot;&quot;, std::optional&lt; bool &gt; _useHwSurface={})</td></tr>
<tr class="memdesc:ab409f17ea63714c450e2befaaa3a7eb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the encoder. This should be called once. Add new frames to the video using the AddFrame function. Use SaveToFile when the video is complete.  <a href="classgz_1_1common_1_1VideoEncoder.html#ab409f17ea63714c450e2befaaa3a7eb7">More...</a><br /></td></tr>
<tr class="separator:ab409f17ea63714c450e2befaaa3a7eb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53cd2c1e274d97938a50ef177ec76081"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgz_1_1common_1_1VideoEncoder.html#a53cd2c1e274d97938a50ef177ec76081">Start</a> (const <a class="elRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> &amp;_format=&quot;mp4&quot;, const <a class="elRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> &amp;_filename=&quot;&quot;, const unsigned int _width=1280, const unsigned int _height=720, const unsigned int _fps=25, const unsigned int _bitRate=0)</td></tr>
<tr class="memdesc:a53cd2c1e274d97938a50ef177ec76081"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the encoder. This should be called once. Add new frames to the video using the AddFrame function. Use SaveToFile when the video is complete.  <a href="classgz_1_1common_1_1VideoEncoder.html#a53cd2c1e274d97938a50ef177ec76081">More...</a><br /></td></tr>
<tr class="separator:a53cd2c1e274d97938a50ef177ec76081"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d498b13dc60fe7d0ba25025182d53fd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgz_1_1common_1_1VideoEncoder.html#a7d498b13dc60fe7d0ba25025182d53fd">Stop</a> ()</td></tr>
<tr class="memdesc:a7d498b13dc60fe7d0ba25025182d53fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the encoder. The SaveToFile function also calls this function.  <a href="classgz_1_1common_1_1VideoEncoder.html#a7d498b13dc60fe7d0ba25025182d53fd">More...</a><br /></td></tr>
<tr class="separator:a7d498b13dc60fe7d0ba25025182d53fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="classgz_1_1common_1_1VideoEncoder.html" title="The VideoEncoder class supports encoding a series of images to a video format, and then writing the v...">VideoEncoder</a> class supports encoding a series of images to a video format, and then writing the video to disk. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af83b198525abac80066e954c64c3be68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af83b198525abac80066e954c64c3be68">&#9670;&nbsp;</a></span>VideoEncoder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classgz_1_1common_1_1VideoEncoder.html">VideoEncoder</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>

</div>
</div>
<a id="a195811223cc0390d762c9abaa5a8c1e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a195811223cc0390d762c9abaa5a8c1e1">&#9670;&nbsp;</a></span>~VideoEncoder()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual ~<a class="el" href="classgz_1_1common_1_1VideoEncoder.html">VideoEncoder</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a5344a8e4273b5570d9200195690d134e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5344a8e4273b5570d9200195690d134e">&#9670;&nbsp;</a></span>AddFrame() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool AddFrame </td>
          <td>(</td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"><em>_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>_width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>_height</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a single frame to be encoded. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_frame</td><td><a class="el" href="classgz_1_1common_1_1Image.html" title="Encapsulates an image.">Image</a> buffer to be encoded </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_width</td><td>Input frame width </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_height</td><td>Input frame height </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success </dd></dl>

</div>
</div>
<a id="a50eaf0e74369d57c572fa2e9e353d583"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50eaf0e74369d57c572fa2e9e353d583">&#9670;&nbsp;</a></span>AddFrame() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool AddFrame </td>
          <td>(</td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"><em>_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>_width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>_height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::chrono::steady_clock::time_point &amp;&#160;</td>
          <td class="paramname"><em>_timestamp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a single timestamped frame to be encoded. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_frame</td><td><a class="el" href="classgz_1_1common_1_1Image.html" title="Encapsulates an image.">Image</a> buffer to be encoded </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_width</td><td>Input frame width </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_height</td><td>Input frame height </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_timestamp</td><td>Timestamp of the image frame </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success. </dd></dl>

</div>
</div>
<a id="a901a5cf7dc5b49115dfa4cbbb7dfec1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a901a5cf7dc5b49115dfa4cbbb7dfec1e">&#9670;&nbsp;</a></span>BitRate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int BitRate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the bit rate. </p>
<dl class="section return"><dt>Returns</dt><dd>Bit rate </dd></dl>

</div>
</div>
<a id="a9f28e2eca22071b9089e92d34ced1f31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f28e2eca22071b9089e92d34ced1f31">&#9670;&nbsp;</a></span>Format()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> Format </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the encoding format. </p>
<dl class="section return"><dt>Returns</dt><dd>Encoding format </dd></dl>

</div>
</div>
<a id="a0bdfc5030c1af4342663ece91329f6d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bdfc5030c1af4342663ece91329f6d5">&#9670;&nbsp;</a></span>IsEncoding()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool IsEncoding </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>True if the enoder has been started, false otherwise. </p>
<dl class="section return"><dt>Returns</dt><dd>True if Start has been called. </dd></dl>

</div>
</div>
<a id="a372de693ad40b3f42839c8ec6ac845f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a372de693ad40b3f42839c8ec6ac845f4">&#9670;&nbsp;</a></span>Reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset to default video properties and clean up allocated memory. This will also delete any temporary files. </p>

</div>
</div>
<a id="a76865d64e4b5fe2a7a0c8544fab5f9e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76865d64e4b5fe2a7a0c8544fab5f9e6">&#9670;&nbsp;</a></span>SaveToFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SaveToFile </td>
          <td>(</td>
          <td class="paramtype">const <a class="elRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>_filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write the video to disk param[in] _filename File in which to save the encoded data. </p>
<dl class="section return"><dt>Returns</dt><dd>True on success. </dd></dl>

</div>
</div>
<a id="a55e3737a078bb44592d4297ba82bac58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55e3737a078bb44592d4297ba82bac58">&#9670;&nbsp;</a></span>Start() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Start </td>
          <td>(</td>
          <td class="paramtype">const <a class="elRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>_format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>_filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>_width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>_height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>_fps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>_bitRate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>_allowHwAccel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the encoder. This should be called once. Add new frames to the video using the AddFrame function. Use SaveToFile when the video is complete. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_width</td><td>Width in pixels of the output video. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_height</td><td>Height in pixels of the output video. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_format</td><td>String that represents the video type. Supported types include: "avi", "ogv", mp4", "v4l2". If using
"v4l2", you must also specify a _filename. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_bitRate</td><td>Bit rate to encode the video. A value of zero will cause this function to automatically compute a bitrate. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_filename</td><td>Name of the file that stores the video while it is being created. This is a temporary file when recording to disk, or a video4linux loopback device like /dev/video0 when the _format is "v4l2". If blank, a default temporary file is used. However, the "v4l2" _format must be accompanied with a video loopback device filename. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_allowHwAccel</td><td>If true, HW acceleration settings are read from environment variables (see the other <a class="el" href="classgz_1_1common_1_1VideoEncoder.html#a53cd2c1e274d97938a50ef177ec76081" title="Start the encoder. This should be called once. Add new frames to the video using the AddFrame functio...">Start()</a> overload for the loading mechanism description). If set to false, only SW encoding will be done. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success. Do NOT ignore the return value. If <a class="el" href="classgz_1_1common_1_1VideoEncoder.html#a53cd2c1e274d97938a50ef177ec76081" title="Start the encoder. This should be called once. Add new frames to the video using the AddFrame functio...">Start()</a> failed, encoding will not work. If <a class="el" href="classgz_1_1common_1_1VideoEncoder.html#a53cd2c1e274d97938a50ef177ec76081" title="Start the encoder. This should be called once. Add new frames to the video using the AddFrame functio...">Start()</a> function failed and you ran it with allowed HW acceleration, you can try running it once more without it (this can help in case the HW encoder can be found and detected, but it fails to start, e.g. when NVENC sessions are exhausted). </dd></dl>

</div>
</div>
<a id="ab409f17ea63714c450e2befaaa3a7eb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab409f17ea63714c450e2befaaa3a7eb7">&#9670;&nbsp;</a></span>Start() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Start </td>
          <td>(</td>
          <td class="paramtype">const <a class="elRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>_format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>_filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>_width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>_height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>_fps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>_bitRate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classgz_1_1common_1_1FlagSet.html">FlagSet</a>&lt; HWEncoderType &gt; &amp;&#160;</td>
          <td class="paramname"><em>_allowedHwAccel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>_hwAccelDevice</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::optional&lt; bool &gt;&#160;</td>
          <td class="paramname"><em>_useHwSurface</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the encoder. This should be called once. Add new frames to the video using the AddFrame function. Use SaveToFile when the video is complete. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_width</td><td>Width in pixels of the output video. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_height</td><td>Height in pixels of the output video. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_format</td><td>String that represents the video type. Supported types include: "avi", "ogv", mp4", "v4l2". If using
"v4l2", you must also specify a _filename. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_bitRate</td><td>Bit rate to encode the video. A value of zero will cause this function to automatically compute a bitrate. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_filename</td><td>Name of the file that stores the video while it is being created. This is a temporary file when recording to disk, or a video4linux loopback device like /dev/video0 when the _format is "v4l2". If blank, a default temporary file is used. However, the "v4l2" _format must be accompanied with a video loopback device filename. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_allowedHwAccel</td><td>Allowed HW acceleration frameworks to probe (as a bitmask of values of HWAccelerationDevice enum). Set to HWAccelerationDevice::NONE to force software encoding only. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_hwAccelDevice</td><td>If nonempty, specifies the HW device to use for encoding. If empty, the framework search method will look for some default devices. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success. Do NOT ignore the return value. If <a class="el" href="classgz_1_1common_1_1VideoEncoder.html#a53cd2c1e274d97938a50ef177ec76081" title="Start the encoder. This should be called once. Add new frames to the video using the AddFrame functio...">Start()</a> failed, encoding will not work. If <a class="el" href="classgz_1_1common_1_1VideoEncoder.html#a53cd2c1e274d97938a50ef177ec76081" title="Start the encoder. This should be called once. Add new frames to the video using the AddFrame functio...">Start()</a> function failed and you ran it with some HW acceleration, you can try running it once more with a different acceleration config (this can help in case the HW encoder can be found and detected, but it fails to start, e.g. when NVENC sessions are exhausted). </dd></dl>

</div>
</div>
<a id="a53cd2c1e274d97938a50ef177ec76081"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53cd2c1e274d97938a50ef177ec76081">&#9670;&nbsp;</a></span>Start() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Start </td>
          <td>(</td>
          <td class="paramtype">const <a class="elRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>_format</em> = <code>&quot;mp4&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="http://en.cppreference.com/w/cpp/string/basic_string.html">std::string</a> &amp;&#160;</td>
          <td class="paramname"><em>_filename</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>_width</em> = <code>1280</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>_height</em> = <code>720</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>_fps</em> = <code>25</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>_bitRate</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start the encoder. This should be called once. Add new frames to the video using the AddFrame function. Use SaveToFile when the video is complete. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_width</td><td>Width in pixels of the output video. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_height</td><td>Height in pixels of the output video. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_format</td><td>String that represents the video type. Supported types include: "avi", "ogv", mp4", "v4l2". If using
"v4l2", you must also specify a _filename. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_bitRate</td><td>Bit rate to encode the video. A value of zero will cause this function to automatically compute a bitrate. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">_filename</td><td>Name of the file that stores the video while it is being created. This is a temporary file when recording to disk, or a video4linux loopback device like /dev/video0 when the _format is "v4l2". If blank, a default temporary file is used. However, the "v4l2" _format must be accompanied with a video loopback device filename. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success. Do NOT ignore the return value. If <a class="el" href="classgz_1_1common_1_1VideoEncoder.html#a53cd2c1e274d97938a50ef177ec76081" title="Start the encoder. This should be called once. Add new frames to the video using the AddFrame functio...">Start()</a> failed, encoding will not work. If <a class="el" href="classgz_1_1common_1_1VideoEncoder.html#a53cd2c1e274d97938a50ef177ec76081" title="Start the encoder. This should be called once. Add new frames to the video using the AddFrame functio...">Start()</a> function failed, you can try running the overload with _allowHwAccel=false to see if the failure isn't a result of faulty HW encoding (e.g. when NVENC sessions are exhausted). </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This will automatically select a HW-accelerated encoder based on the values of environment variables GZ_VIDEO_ALLOWED_ENCODERS, GZ_VIDEO_ENCODER_DEVICE and GZ_VIDEO_ENCODER_USE_HW_SURFACE. To completely avoid trying to set up HW accelerated encoding, set GZ_VIDEO_ALLOWED_ENCODERS to value NONE or leave it empty or unset. The meaning of these variables is the following:<ul>
<li>GZ_VIDEO_ALLOWED_ENCODERS is a colon-separated list of values of HWEncoderType enum, or ALL to allow all encoders. Default is NONE.</li>
<li>GZ_VIDEO_ENCODER_DEVICE optionally specifies the HW device to use for encoding (used only when a matching encoder is found first). By default, an empty string is used, which means to use whatever device is found to work first.</li>
<li>GZ_VIDEO_USE_HW_SURFACE specifies whether the encoder should use an explicit GPU buffer for video frames. Some codecs do this implicitly, and then this setting has no meaning (setting it to 1 can actually decrease performance). For codecs that need to set this explicitly, this variable is checked for three values: 1, 0 and empty. Empty value means that the implementation should guess whether explicit GPU buffers are worth it or not. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a7d498b13dc60fe7d0ba25025182d53fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d498b13dc60fe7d0ba25025182d53fd">&#9670;&nbsp;</a></span>Stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop the encoder. The SaveToFile function also calls this function. </p>
<dl class="section return"><dt>Returns</dt><dd>True on success. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="gz_2common_2VideoEncoder_8hh_source.html">gz/common/VideoEncoder.hh</a></li>
</ul>
</div><!-- contents -->
      </div>
    </main>
  </div>
</body>
