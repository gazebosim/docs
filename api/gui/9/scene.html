<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="keywords" content="Gazebo Gui">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Gazebo Gui: 3D Scene</title>
    <script type="text/javascript" src="https://gazebosim.org/assets/doxygen/dynsections.js"></script>
    <script type="text/javascript" src="jquery.js"></script>
    <link rel="icon" type="image/x-icon" href="https://gazebosim.org/assets/icon/favicon.ico">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,300,100,500,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.deep_orange-blue.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"> </script>
    <link href="https://gazebosim.org/assets/doxygen/doxygen.css" rel="stylesheet" type="text/css">
  </head>
    <script type="text/javascript">
      /* Replace all the "permalink" &#9670;&nbsp; icons with a unicode link
        symbol.*/
      $(document).ready(function() {
        var elems = document.getElementsByClassName("permalink");
        for (var i = 0; i < elems.length; ++i) {
          elems[i].firstChild.innerHTML="&#x1f517;";
          elems[i].firstChild.style.fontSize="18px";
        }
      });
    </script>
  </head>
<body>
  <div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer">
    <div class="mdl-layout__drawer mdl-color--grey-100 mdl-color-text--blue-grey-50">
      <header class="mdl-color--grey-100">
        <a href="index.html"><img width="60px" src="https://gazebosim.org/assets/doxygen/gazebo_logo.svg"/></a>
        <h1 class="project_title">Gazebo Gui</h1>
        <h2>API Reference</h2>
        <div class="version">
        9.0.0
        </div>
      </header>
      <!-- NOTE: If you add a link to a doxygen generated page, then make
                 sure to update the required_html_fils list in
                 GzCreateDocs.cmake -->
      <nav class="gz-navigation mdl-navigation">
        <a class="mdl-navigation__link" href="tutorials.html">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">insert_drive_file</i>Tutorials</a>
        <a id="class_menu" class="mdl-navigation__link" href="#">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">library_books</i>Classes</a>
        <a id="namespaces_menu"class="mdl-navigation__link" href="#">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">toc</i>Namespaces</a>
        <a class="mdl-navigation__link" href="files.html">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">insert_drive_file</i>Files</a>
        <a class="mdl-navigation__link" target="_blank"
           href="http://gazebosim.org">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">launch</i>Gazebo Website</a>
      </nav>
      <!-- classes sub menu -->
      <ul for="class_menu" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect mdl-navigation">
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link" href="classes.html">Index</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="annotated.html">List</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="hierarchy.html">Hierarchy</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions.html">Members: All</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_func.html">Members: Functions</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_vars.html">Members: Variables</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_type.html">Members: Typedefs</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_enum.html">Members: Enumerations</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_eval.html">Members: Enumerator</a>
        </li>
      </ul>
      <!-- namespaces sub menu -->
      <ul for="namespaces_menu" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect mdl-navigation">
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespaces.html">List</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers.html">Members</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_func.html">Functions</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_type.html">Typedefs</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_vars.html">Variables</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_enum.html">Enumerations</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_eval.html">Enumerator</a>
        </li>
      </ul>
    </div>
    <main class="mdl-layout__content mdl-color--white">
    <div id="top">
<!-- Generated by Doxygen 1.9.8 -->
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">3D Scene</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md51"></a>
Overview</h2>
<p>Applications built on top of Gazebo GUI can leverage Gazebo Rendering to display interactive 3D scenes. This tutorial will help application developers leverage Gazebo GUI's plugins to quickly develop plugins that interact with the 3D scene.</p>
<blockquote class="doxtable">
<p>&zwj;This tutorial applies for Gazebo GUI version 6 (Fortress) and higher. </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md52"></a>
Minimal scene</h2>
<p>Gazebo GUI ships with the <code>MinimalScene</code> plugin, which instantiates a 3D scene and provides orbit controls, but doesn't do much else. Actions such as adding, modifying and removing rendering elements from the scene must be performed by other plugins that work alongside the minimal scene.</p>
<p>Each application will have a different way of updating the 3D scene. For example, <a href="https://gazebosim.org/libs/gazebo">Gazebo</a> updates the scene based on its entities and components, and <a href="https://github.com/gazebosim/gz-rviz/">Gazebo RViz</a> updates the scene based on ROS 2 messages. Each of these applications provides custom plugins that update the 3D scene through events and the render thread.</p>
<p>Gazebo GUI ships with a plugin that updates the scene based on Gazebo Transport messages, the <code>gz::gui::plugins::TransportSceneManager</code>. Applications can use that directly, or use it as inspiration for developing their own scene managers.</p>
<h2><a class="anchor" id="autotoc_md53"></a>
Transport scene manager example</h2>
<p>Let's start by loading <code>MinimalScene</code> together with <code>TransportSceneManager</code>. We'll use a simple program to send messages to <code>TransportSceneManager</code>, which will process those and update the 3D scene, and then the <code>MinimalScene</code> will paint the scene to the window.</p>
<p>Follow the instructions in the <a href="https://github.com/gazebosim/gz-gui/tree/main/examples/standalone/scene_provider">scene_provider example</a> and see visuals being added and moved on the 3D scene.</p>
<h3><a class="anchor" id="autotoc_md54"></a>
Getting the scene</h3>
<p>After the <code>MinimalScene</code> instantiates an <code><a class="elRef" href="https://gazebosim.org/api/rendering/9/classgz_1_1rendering_1_1Scene.html">gz::rendering::Scene</a></code> pointer, any plugin can get it using the rendering engine's singleton. The <code><a class="elRef" href="https://gazebosim.org/api/rendering/9/namespacegz_1_1rendering.html#a31d39e3e5fb9030cf3204ddfef29f3e6">gz::rendering::sceneFromFirstRenderEngine()</a></code> function is a convenient way of getting the scene for applications that have a single scene loaded.</p>
<p>The <code>TransportSceneManager</code> plugin, for example, attempts to get the scene at every iteration until it succeeds. This way, it can find a 3D scene even if <code>MinimalScene</code> is loaded afterwards.</p>
<h3><a class="anchor" id="autotoc_md55"></a>
Render thread</h3>
<p>Rendering operations aren't thread-safe. To make sure there are no race conditions, all rendering operations should happen in the same thread, the "render thread". In order to access that thread from a custom plugin, it's necessary to listen to the <code>gz::gui::events::Render</code> or <code>gz::gui::events::PreRender</code> events, which are emitted by the <code>MinimalScene</code>.</p>
<p>See how the <code>TransportSceneManager</code> installs an event filter with <code>installEventFilter</code>, registers an <code>eventFilter</code> callback and performs all rendering operations within the <code>OnRender</code> function. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
      </div>
    </main>
  </div>
</body>
