<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="keywords" content="Gazebo Sim">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Gazebo Sim: Wheel Slip systems</title>
    <script type="text/javascript" src="https://gazebosim.org/assets/doxygen/dynsections.js"></script>
    <script type="text/javascript" src="jquery.js"></script>
    <link rel="icon" type="image/x-icon" href="https://gazebosim.org/assets/icon/favicon.ico">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,300,100,500,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.deep_orange-blue.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"> </script>
    <link href="https://gazebosim.org/assets/doxygen/doxygen.css" rel="stylesheet" type="text/css">
  </head>
    <script type="text/javascript">
      /* Replace all the "permalink" &#9670;&nbsp; icons with a unicode link
        symbol.*/
      $(document).ready(function() {
        var elems = document.getElementsByClassName("permalink");
        for (var i = 0; i < elems.length; ++i) {
          elems[i].firstChild.innerHTML="&#x1f517;";
          elems[i].firstChild.style.fontSize="18px";
        }
      });
    </script>
  </head>
<body>
  <div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer">
    <div class="mdl-layout__drawer mdl-color--grey-100 mdl-color-text--blue-grey-50">
      <header class="mdl-color--grey-100">
        <a href="index.html"><img width="60px" src="https://gazebosim.org/assets/doxygen/gazebo_logo.svg"/></a>
        <h1 class="project_title">Gazebo Sim</h1>
        <h2>API Reference</h2>
        <div class="version">
        10.0.0~pre2
        </div>
      </header>
      <!-- NOTE: If you add a link to a doxygen generated page, then make
                 sure to update the required_html_fils list in
                 GzCreateDocs.cmake -->
      <nav class="gz-navigation mdl-navigation">
        <a class="mdl-navigation__link" href="tutorials.html">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">insert_drive_file</i>Tutorials</a>
        <a id="class_menu" class="mdl-navigation__link" href="#">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">library_books</i>Classes</a>
        <a id="namespaces_menu"class="mdl-navigation__link" href="#">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">toc</i>Namespaces</a>
        <a class="mdl-navigation__link" href="files.html">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">insert_drive_file</i>Files</a>
        <a class="mdl-navigation__link" target="_blank"
           href="http://gazebosim.org">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">launch</i>Gazebo Website</a>
      </nav>
      <!-- classes sub menu -->
      <ul for="class_menu" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect mdl-navigation">
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link" href="classes.html">Index</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="annotated.html">List</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="hierarchy.html">Hierarchy</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions.html">Members: All</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_func.html">Members: Functions</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_vars.html">Members: Variables</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_type.html">Members: Typedefs</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_enum.html">Members: Enumerations</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_eval.html">Members: Enumerator</a>
        </li>
      </ul>
      <!-- namespaces sub menu -->
      <ul for="namespaces_menu" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect mdl-navigation">
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespaces.html">List</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers.html">Members</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_func.html">Functions</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_type.html">Typedefs</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_vars.html">Variables</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_enum.html">Enumerations</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_eval.html">Enumerator</a>
        </li>
      </ul>
    </div>
    <main class="mdl-layout__content mdl-color--white">
    <div id="top">
<!-- Generated by Doxygen 1.9.8 -->
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Wheel Slip systems</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="overview-13"></a>
Overview</h1>
<p>This tutorial shows how to configure slip parameters for wheeled vehicles using two different wheel slip plugins.</p>
<p>Wheel slip configuration is useful for simulating scenarios where a vehicle drives over different types of surfaces. For example, a vehicle climbing up steep gravel road may start slipping and the Gazebo allows users to configure the slip compliance and friction parameters of each individual wheel to approximate this behavior instead of simulating each individual rock on the road and its contact with the wheel.</p>
<h1><a class="anchor" id="wheel-slip-systems"></a>
Wheel Slip systems</h1>
<p>There are two systems in Gazebo related to wheel slip configuration:</p>
<ol type="1">
<li>Wheel slip system</li>
</ol>
<ol type="1">
<li>Lookup wheel slip system</li>
</ol>
<p>Both of the these systems are model plugins, meaning they should be added to a model in the world. The wheel slip system allows users to configure slip parameters for each wheel in the model. The lookup wheel slip system on the other hand has to be used together with the wheel slip system. It provides extra functionality that enables the slip parameters to be dynamically updated as the vehicle moves around in the environment.</p>
<h2><a class="anchor" id="wheel-slip-system"></a>
Wheel Slip system</h2>
<p>The wheel slip system updates wheel slip parameters based on linear wheel spin velocity. Here are the parameters that can be configured per wheel link:</p>
<ul>
<li><code>&lt;slip_compliance_lateral&gt;</code>: Unitless wheel slip compliance in lateral direction. The parameter should be non-negative, with a value of zero allowing no slip and larger values allowing increasing slip.</li>
<li><code>&lt;slip_compliance_longitudinal&gt;</code>: Unitless wheel slip compliance in longitudinal direction. The parameter should also be non-negative and larger values mean increasing slip.</li>
<li><code>&lt;wheel_normal_force&gt;</code>: Wheel normal force estimate used to compute slip compliance, which takes units of 1/N.</li>
<li><code>&lt;wheel_radius&gt;</code>: Radius of the wheel in meters.</li>
</ul>
<p>You can find more detailed information on the wheel slip system and its parameters in the <a href="https://github.com/gazebosim/gz-sim/blob/gz-sim10/src/systems/wheel_slip/WheelSlip.hh">WheelSlip.hh</a> header file.</p>
<p>Gazebo has an example world that demonstrates the use of the wheel slip system, namely <a href="https://github.com/gazebosim/gz-sim/blob/gz-sim10/examples/worlds/trisphere_cycle_wheel_slip.sdf">trisphere_cycle_wheel_slip.sdf</a>.</p>
<p>In this example, the world consists of two trisphere cycles and uses an inclined gravity vector to simulate a sloped surface. The red trisphere cycle on the right has zero slip compliance values (no slip) while the blue trisphere cycle on the left has both the lateral and longitudinal slip compliance values set to 1. Both trispheres have their rear wheels controlled by joint velocity control systems with initial +x velocity to move them forward up the sloped surface.</p>
<p>Launch Gazebo with the example world:</p>
<div class="fragment"><div class="line">gz sim -v 4 trisphere_cycle_wheel_slip.sdf</div>
</div><!-- fragment --><p>Hit the Play button and you should see that the two trisphere cycles start moving forward. The blue trisphere cycle moves slower than the red trisphere cycle due to wheel slippage.</p>
<div class="image">
<img src="wheel_slip.gif" alt=""/>
</div>
<h2><a class="anchor" id="lookup-wheel-slip-system"></a>
Lookup Wheel Slip system</h2>
<p>The look up wheel slip system dynamically adjusts the wheel slip and friction parameters based on the wheel's position within the region covered by a 'slip map'. This system needs to be used together with the wheel slip system otherwise it will not have any impact on the model it is attached to.</p>
<p>As the wheeled vehicle moves around in the environment, the lookup wheel slip system looks up the corresponding lateral and longitudinal slip and friction delta values encoded in the slip map based on the wheel position. These delta values are applied against the 'nominal' slip parameters of the wheel link, i.e. original slip compliance values specified in the wheel slip system and the wheel link's origin friction (mu1 and mu2) values. This yields new updated slip and friction values which are then sent to the wheel slip system at run time.</p>
<p>The slip map is a lookup image map that represents the traversable region of the world. The slip and friction values are encoded in the image's RGB channels.</p>
<p>Here are the lookup wheel slip system's parameters:</p><ul>
<li><code>&lt;slip_map&gt;</code>: Path to the slip map image.<ul>
<li>The red channel affects lateral slip, green affects longitudinal slip, and blue affects friction (mu1 and mu2).</li>
</ul>
</li>
<li><code>&lt;size_x&gt;</code>: x size of lookup slip map in meters.</li>
<li><code>&lt;size_y&gt;</code>: y size of lookup slip map in meters.</li>
<li><code>&lt;wheel_link_name&gt;</code>: The wheel link name. Specify one <code>&lt;wheel_link_name&gt;</code> per wheel link.</li>
<li><code>&lt;slip_compliance_lateral_delta&gt;</code>: The delta amount to apply to the lateral slip.</li>
<li><code>&lt;slip_compliance_longitudinal_delta&gt;</code>: The delta amount to apply to longitudinal slip.</li>
<li><code>&lt;friction_delta&gt;</code>: The delta amount to apply to the friction coefficients (mu1, mu2).</li>
</ul>
<p>You can find more detailed information on the lookup wheel slip system and its parameters in the <a href="https://github.com/gazebosim/gz-sim/blob/gz-sim10/src/systems/lookup_wheel_slip/LookupWheelSlip.hh">LookupWheelSlip.hh</a> header file.</p>
<p>The <a href="https://github.com/gazebosim/gz-sim/blob/gz-sim10/examples/worlds/lookup_wheel_slip.sdf">lookup_wheel_slip.sdf</a>. example world showcases the use of the lookup wheel slip system together with the wheel slip system.</p>
<p>In this example, the world consists of two vehicles, blue and green, on a flat heightmap. The blue vehicle has a lookup wheel slip system and a regular wheel slip system while the green only has a regular wheel slip plugin with fixed slip compliance values.</p>
<p>The slip map used in this demo contains several regions with increased longitudinal slip compliance values (encoded in the green channel of the slip map). The same slip map is overlaid on top of the heightmap to help visualize where the slippage regions are.</p>
<p>Launch Gazebo with the example world:</p>
<div class="fragment"><div class="line">gz sim -v 4 lookup_wheel_slip.sdf</div>
</div><!-- fragment --><p>Hit the Play button to see the two vehicles move forward. When the blue vehicle drives over the green regions, the longitudinal slip compliance value of the wheel that is in contact with the slip region will be dynamically updated (increased) causing the wheel to slip and the whole vehicle to turn. The green vehicle should move forward in a straight line without being affected by the slip regions.</p>
<div class="image">
<img src="lookup_wheel_slip.gif" alt=""/>
</div>
 </div></div><!-- contents -->
</div><!-- PageDoc -->
      </div>
    </main>
  </div>
</body>
