<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="keywords" content="Gazebo Sim">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Gazebo Sim: Video Recorder</title>
    <script type="text/javascript" src="https://gazebosim.org/assets/doxygen/dynsections.js"></script>
    <script type="text/javascript" src="jquery.js"></script>
    <link rel="icon" type="image/x-icon" href="https://gazebosim.org/assets/icon/favicon.ico">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,300,100,500,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.deep_orange-blue.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"> </script>
    <link href="https://gazebosim.org/assets/doxygen/doxygen.css" rel="stylesheet" type="text/css">
  </head>
    <script type="text/javascript">
      /* Replace all the "permalink" &#9670;&nbsp; icons with a unicode link
        symbol.*/
      $(document).ready(function() {
        var elems = document.getElementsByClassName("permalink");
        for (var i = 0; i < elems.length; ++i) {
          elems[i].firstChild.innerHTML="&#x1f517;";
          elems[i].firstChild.style.fontSize="18px";
        }
      });
    </script>
  </head>
<body>
  <div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer">
    <div class="mdl-layout__drawer mdl-color--grey-100 mdl-color-text--blue-grey-50">
      <header class="mdl-color--grey-100">
        <a href="index.html"><img width="60px" src="https://gazebosim.org/assets/doxygen/gazebo_logo.svg"/></a>
        <h1 class="project_title">Gazebo Sim</h1>
        <h2>API Reference</h2>
        <div class="version">
        9.4.0
        </div>
      </header>
      <!-- NOTE: If you add a link to a doxygen generated page, then make
                 sure to update the required_html_fils list in
                 GzCreateDocs.cmake -->
      <nav class="gz-navigation mdl-navigation">
        <a class="mdl-navigation__link" href="tutorials.html">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">insert_drive_file</i>Tutorials</a>
        <a id="class_menu" class="mdl-navigation__link" href="#">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">library_books</i>Classes</a>
        <a id="namespaces_menu"class="mdl-navigation__link" href="#">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">toc</i>Namespaces</a>
        <a class="mdl-navigation__link" href="files.html">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">insert_drive_file</i>Files</a>
        <a class="mdl-navigation__link" target="_blank"
           href="http://gazebosim.org">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">launch</i>Gazebo Website</a>
      </nav>
      <!-- classes sub menu -->
      <ul for="class_menu" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect mdl-navigation">
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link" href="classes.html">Index</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="annotated.html">List</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="hierarchy.html">Hierarchy</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions.html">Members: All</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_func.html">Members: Functions</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_vars.html">Members: Variables</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_type.html">Members: Typedefs</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_enum.html">Members: Enumerations</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_eval.html">Members: Enumerator</a>
        </li>
      </ul>
      <!-- namespaces sub menu -->
      <ul for="namespaces_menu" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect mdl-navigation">
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespaces.html">List</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers.html">Members</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_func.html">Functions</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_type.html">Typedefs</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_vars.html">Variables</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_enum.html">Enumerations</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_eval.html">Enumerator</a>
        </li>
      </ul>
    </div>
    <main class="mdl-layout__content mdl-color--white">
    <div id="top">
<!-- Generated by Doxygen 1.9.8 -->
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Video Recorder</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="using-the-video-recorder-plugin"></a>
Using the video recorder plugin</h2>
<p>Gazebo offers a video recorder tool for recording videos from the 3D scene. The recorder tool is available as a GUI plugin. To open this plugin, first launch Gazebo and select the ellipsis menu on top right (3 dots menu), and scroll down to find the <code>Video Recorder</code> option. Click on the plugin to open the Video Recorder tool. Alternatively, launch the demo world in Gazebo that already has this plugin included in the GUI.</p>
<div class="fragment"><div class="line">gz sim -v 4 video_record_dbl_pendulum.sdf</div>
</div><!-- fragment --><p>In this demo world, you should see a video recorder icon positioned on the top left area of the window along with other buttons. Clicking on the video recorder button gives you the video format options that are available.</p>
<div class="image">
<img src="video_recorder.png" alt=""/>
</div>
<blockquote class="doxtable">
<p>&zwj;<b>NOTE</b> The OGV format might not be supported by the underlying libavcodec implementation. This is especially true on Windows with the conda-installed dependencies. There is no easy way to add the VP8 codec support except for building libavcodec manually and enabling the support. </p>
</blockquote>
<p>Once an option is selected, recording starts immediately as indicated by a flashing video recorder icon. At anytime that you wish to stop recording, click on the flashing icon and select <code>Stop</code>. A file dialog window should pop up and let you select the path to save the recorded video in.</p>
<p>Playback the video you just saved and you should notice that the resolution of the video is based on the size of your 3D scene window. So if you wish to record the video in a different size, make sure to configure the GUI window prior to recording.</p>
<div class="image">
<img src="video_recorder.gif" alt=""/>
</div>
<h2><a class="anchor" id="video-recorder-configurations"></a>
Video recorder configurations</h2>
<p>A few video recorder parameters can be specified using GUI configurations, see the <a href="gui_config.html">GUI Configuration</a> tutorial for more information. If you launched Gazebo with the <code>video_record_dbl_pendulum.sdf</code> demo world, the GUI configurations are embedded in the world SDF file so you will need to download a copy of the <a href="https://raw.githubusercontent.com/gazebosim/gz-sim/main/examples/worlds/video_record_dbl_pendulum.sdf">sdf file</a>. and modify the GUI configuration in that file. On the other hand, if you launched Gazebo with a world file that does not have GUI configurations, you will need to specify the settings in <code>$HOME/.gz/sim/&lt;#&gt;/gui.config</code>.</p>
<p>Here is an example of the video recorder plugin's settings:</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">plugin</span> <span class="keyword">filename</span>=<span class="stringliteral">&quot;VideoRecorder&quot;</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;VideoRecorder&quot;</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">gz-gui</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">property</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;resizable&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;bool&quot;</span>&gt;<span class="keyword">false</span>&lt;/<span class="keywordtype">property</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">property</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;x&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;double&quot;</span>&gt;300&lt;/<span class="keywordtype">property</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">property</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;y&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;double&quot;</span>&gt;50&lt;/<span class="keywordtype">property</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">property</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;width&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;double&quot;</span>&gt;50&lt;/<span class="keywordtype">property</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">property</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;height&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;double&quot;</span>&gt;50&lt;/<span class="keywordtype">property</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">property</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;state&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;string&quot;</span>&gt;<span class="keyword">floating</span>&lt;/<span class="keywordtype">property</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">property</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;showTitleBar&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;bool&quot;</span>&gt;<span class="keyword">false</span>&lt;/<span class="keywordtype">property</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">property</span> <span class="keyword">key</span>=<span class="stringliteral">&quot;cardBackground&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;string&quot;</span>&gt;#777777&lt;/<span class="keywordtype">property</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">gz-gui</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">record_video</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">use_sim_time</span>&gt;<span class="keyword">true</span>&lt;/<span class="keywordtype">use_sim_time</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">lockstep</span>&gt;<span class="keyword">true</span>&lt;/<span class="keywordtype">lockstep</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">bitrate</span>&gt;4000000&lt;/<span class="keywordtype">bitrate</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">record_video</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">plugin</span>&gt;</div>
</div><!-- fragment --><p>Options are:</p>
<ul>
<li><b>use_sim_time</b>: Values are <code>[true|false]</code>. Record videos based on sim time, i.e. each frame encoded into the video will be timestamped using sim time. For example, if a complex simulation was running at half of real time speed, and <code>&lt;use_sim_time&gt;</code> is set to true, video playback should ignore delays due to low Real Time Factor (RTF) and plays back video as if RTF was 1.0. By default, the value is <code>false</code>, which means the videos are recorded based on real time.</li>
<li><b>lockstep</b>: Values are <code>[true|false]</code>. Lockstep simulation for video recording. This forces the GUI to pause and only process a new state update from the server until the video recorder finishes encoding the current frame. This ensures that the video recorder does not miss any updates / frames in the resulting video. This configuration makes more sense when used with <code>&lt;use_sim_time&gt;</code> set to <code>true</code>, in which case it produces smooth videos with exact timing, i.e. if you record simulation for 1 minute sim time, the resulting video should be also 1 minute long (+/- 1 second due to encoder settings). Defaults to <code>false</code>. Note: the server publishes states at 60Hz and the video recorder records at 25 FPS so it also makes sense to update the Scene Broadcaster system to only publish states at 25Hz. You can do this by going to the world SDF file, locate the <code><a class="el" href="classgz_1_1sim_1_1systems_1_1SceneBroadcaster.html" title="System which periodically publishes a gz::msgs::Scene message with updated information.">gz::sim::systems::SceneBroadcaster</a></code> system, and set the <code>&lt;state_hertz&gt;</code> parameter:</li>
</ul>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">plugin</span> <span class="keyword">filename</span>=<span class="stringliteral">&#39;gz-sim-scene-broadcaster-system&#39;</span></div>
<div class="line">        <span class="keyword">name</span>=<span class="stringliteral">&#39;gz::sim::systems::SceneBroadcaster&#39;</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">state_hertz</span>&gt;25&lt;/<span class="keywordtype">state_hertz</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">plugin</span>&gt;</div>
</div><!-- fragment --><ul>
<li><b>bitrate</b>: Video encoding bitrate in bps. This affects the quality of the generated video. The default bitrate is 2Mbps.</li>
</ul>
<h2><a class="anchor" id="hardware-accelerated-encoding"></a>
Hardware-accelerated encoding</h2>
<p>Since Gazebo Common 3.10.2, there is support for utilizing the power of GPUs to speed up the video encoding process. See the <a href="https://gazebosim.org/api/common/6/hw-encoding.html">Hardware-accelerated Video Encoding tutorial</a> for more details. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
      </div>
    </main>
  </div>
</body>
