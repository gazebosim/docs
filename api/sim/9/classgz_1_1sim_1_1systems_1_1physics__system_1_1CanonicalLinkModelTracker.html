<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="keywords" content="Gazebo Sim">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Gazebo Sim: CanonicalLinkModelTracker Class Reference</title>
    <script type="text/javascript" src="https://gazebosim.org/assets/doxygen/dynsections.js"></script>
    <script type="text/javascript" src="jquery.js"></script>
    <link rel="icon" type="image/x-icon" href="https://gazebosim.org/assets/icon/favicon.ico">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,300,100,500,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.deep_orange-blue.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"> </script>
    <link href="https://gazebosim.org/assets/doxygen/doxygen.css" rel="stylesheet" type="text/css">
  </head>
    <script type="text/javascript">
      /* Replace all the "permalink" &#9670;&nbsp; icons with a unicode link
        symbol.*/
      $(document).ready(function() {
        var elems = document.getElementsByClassName("permalink");
        for (var i = 0; i < elems.length; ++i) {
          elems[i].firstChild.innerHTML="&#x1f517;";
          elems[i].firstChild.style.fontSize="18px";
        }
      });
    </script>
  </head>
<body>
  <div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer">
    <div class="mdl-layout__drawer mdl-color--grey-100 mdl-color-text--blue-grey-50">
      <header class="mdl-color--grey-100">
        <a href="index.html"><img width="60px" src="https://gazebosim.org/assets/doxygen/gazebo_logo.svg"/></a>
        <h1 class="project_title">Gazebo Sim</h1>
        <h2>API Reference</h2>
        <div class="version">
        9.4.0
        </div>
      </header>
      <!-- NOTE: If you add a link to a doxygen generated page, then make
                 sure to update the required_html_fils list in
                 GzCreateDocs.cmake -->
      <nav class="gz-navigation mdl-navigation">
        <a class="mdl-navigation__link" href="tutorials.html">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">insert_drive_file</i>Tutorials</a>
        <a id="class_menu" class="mdl-navigation__link" href="#">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">library_books</i>Classes</a>
        <a id="namespaces_menu"class="mdl-navigation__link" href="#">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">toc</i>Namespaces</a>
        <a class="mdl-navigation__link" href="files.html">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">insert_drive_file</i>Files</a>
        <a class="mdl-navigation__link" target="_blank"
           href="http://gazebosim.org">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">launch</i>Gazebo Website</a>
      </nav>
      <!-- classes sub menu -->
      <ul for="class_menu" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect mdl-navigation">
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link" href="classes.html">Index</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="annotated.html">List</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="hierarchy.html">Hierarchy</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions.html">Members: All</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_func.html">Members: Functions</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_vars.html">Members: Variables</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_type.html">Members: Typedefs</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_enum.html">Members: Enumerations</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_eval.html">Members: Enumerator</a>
        </li>
      </ul>
      <!-- namespaces sub menu -->
      <ul for="namespaces_menu" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect mdl-navigation">
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespaces.html">List</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers.html">Members</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_func.html">Functions</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_type.html">Typedefs</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_vars.html">Variables</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_enum.html">Enumerations</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_eval.html">Enumerator</a>
        </li>
      </ul>
    </div>
    <main class="mdl-layout__content mdl-color--white">
    <div id="top">
<!-- Generated by Doxygen 1.9.8 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegz.html">gz</a></li><li class="navelem"><a class="el" href="namespacegz_1_1sim.html">sim</a></li><li class="navelem"><a class="el" href="namespacegz_1_1sim_1_1systems.html">systems</a></li><li class="navelem"><a class="el" href="namespacegz_1_1sim_1_1systems_1_1physics__system.html">physics_system</a></li><li class="navelem"><a class="el" href="classgz_1_1sim_1_1systems_1_1physics__system_1_1CanonicalLinkModelTracker.html">CanonicalLinkModelTracker</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="classgz_1_1sim_1_1systems_1_1physics__system_1_1CanonicalLinkModelTracker-members.html">List of all members</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle"><div class="title">CanonicalLinkModelTracker Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Helper class that keeps track of which models have a particular canonical link. This is useful in the physics system for updating model poses - if a canonical link moved in the most recent physics step, then all of the models that have this canonical link should be updated. It's important to preserve topological ordering of the models in case there's a nested model that shares the same canonical link (in a case like this, the parent model pose needs to be updated before updating the child model pose - see the documentation that explains how model pose updates are calculated in PhysicsPrivate::UpdateSim to understand why nested model poses need to be updated in topological order).  
 <a href="classgz_1_1sim_1_1systems_1_1physics__system_1_1CanonicalLinkModelTracker.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="CanonicalLinkModelTracker_8hh_source.html">CanonicalLinkModelTracker.hh</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7d5b20b1199bd27f0e8fcd26d1dfbb74" id="r_a7d5b20b1199bd27f0e8fcd26d1dfbb74"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgz_1_1sim_1_1systems_1_1physics__system_1_1CanonicalLinkModelTracker.html#a7d5b20b1199bd27f0e8fcd26d1dfbb74">AddAllModels</a> (const <a class="el" href="classgz_1_1sim_1_1EntityComponentManager.html">EntityComponentManager</a> &amp;_ecm)</td></tr>
<tr class="memdesc:a7d5b20b1199bd27f0e8fcd26d1dfbb74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save mappings for all models and their canonical links.  <br /></td></tr>
<tr class="separator:a7d5b20b1199bd27f0e8fcd26d1dfbb74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac706ef772ab315fd9745be6c17cd4e31" id="r_ac706ef772ab315fd9745be6c17cd4e31"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgz_1_1sim_1_1systems_1_1physics__system_1_1CanonicalLinkModelTracker.html#ac706ef772ab315fd9745be6c17cd4e31">AddNewModels</a> (const <a class="el" href="classgz_1_1sim_1_1EntityComponentManager.html">EntityComponentManager</a> &amp;_ecm)</td></tr>
<tr class="memdesc:ac706ef772ab315fd9745be6c17cd4e31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save mappings for new models and their canonical links.  <br /></td></tr>
<tr class="separator:ac706ef772ab315fd9745be6c17cd4e31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69a814ed4ba58a8e46daf0cebb4ace02" id="r_a69a814ed4ba58a8e46daf0cebb4ace02"><td class="memItemLeft" align="right" valign="top">const <a class="elRef" href="http://en.cppreference.com/w/cpp/container/set.html">std::set</a>&lt; <a class="el" href="namespacegz_1_1sim.html#ad83694d867b0e3a9446b535b5dfd208d">Entity</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgz_1_1sim_1_1systems_1_1physics__system_1_1CanonicalLinkModelTracker.html#a69a814ed4ba58a8e46daf0cebb4ace02">CanonicalLinkModels</a> (const <a class="el" href="namespacegz_1_1sim.html#ad83694d867b0e3a9446b535b5dfd208d">Entity</a> _canonicalLink) const</td></tr>
<tr class="memdesc:a69a814ed4ba58a8e46daf0cebb4ace02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a topological ordering of models that have a particular canonical link.  <br /></td></tr>
<tr class="separator:a69a814ed4ba58a8e46daf0cebb4ace02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab64a528d9846b9d690e304c1c1d3c9b1" id="r_ab64a528d9846b9d690e304c1c1d3c9b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgz_1_1sim_1_1systems_1_1physics__system_1_1CanonicalLinkModelTracker.html#ab64a528d9846b9d690e304c1c1d3c9b1">RemoveLink</a> (const <a class="el" href="namespacegz_1_1sim.html#ad83694d867b0e3a9446b535b5dfd208d">Entity</a> &amp;_link)</td></tr>
<tr class="memdesc:ab64a528d9846b9d690e304c1c1d3c9b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a link from the mapping. This method should be called when a link is removed from simulation.  <br /></td></tr>
<tr class="separator:ab64a528d9846b9d690e304c1c1d3c9b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Helper class that keeps track of which models have a particular canonical link. This is useful in the physics system for updating model poses - if a canonical link moved in the most recent physics step, then all of the models that have this canonical link should be updated. It's important to preserve topological ordering of the models in case there's a nested model that shares the same canonical link (in a case like this, the parent model pose needs to be updated before updating the child model pose - see the documentation that explains how model pose updates are calculated in PhysicsPrivate::UpdateSim to understand why nested model poses need to be updated in topological order). </p>
<p>It's possible to loop through all of the models and to update poses if the model moved using something like <a class="el" href="classgz_1_1sim_1_1EntityComponentManager.html#a628ef4ea97906791363b9df030575524" title="Get all entities which contain given component types, as well as the components. Note that an entity ...">EntityComponentManager::Each</a>, but the performance of this approach is worse than using just the moved canonical links to determine which model poses should be updated (consider the case where there are a lot of non-static models in a world, but only a few move frequently - if using <a class="el" href="classgz_1_1sim_1_1EntityComponentManager.html#a628ef4ea97906791363b9df030575524" title="Get all entities which contain given component types, as well as the components. Note that an entity ...">EntityComponentManager::Each</a>, we still need to check every single non-static model after a physics update to make sure that the model did not move. If we instead use the updated canonical link information, then we can skip iterating over/checking the models that don't need to be updated). </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a7d5b20b1199bd27f0e8fcd26d1dfbb74" name="a7d5b20b1199bd27f0e8fcd26d1dfbb74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d5b20b1199bd27f0e8fcd26d1dfbb74">&#9670;&#160;</a></span>AddAllModels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AddAllModels </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgz_1_1sim_1_1EntityComponentManager.html">EntityComponentManager</a> &amp;&#160;</td>
          <td class="paramname"><em>_ecm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save mappings for all models and their canonical links. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_ecm</td><td><a class="el" href="classgz_1_1sim_1_1EntityComponentManager.html" title="The EntityComponentManager constructs, deletes, and returns components and entities....">EntityComponentManager</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="classgz_1_1sim_1_1EntityComponentManager.html#a628ef4ea97906791363b9df030575524">EntityComponentManager::Each()</a>, and <a class="elRef" href="http://en.cppreference.com/w/cpp/container/unordered_map/insert.html">unordered_map&lt; K, T &gt;::insert()</a>.</p>

</div>
</div>
<a id="ac706ef772ab315fd9745be6c17cd4e31" name="ac706ef772ab315fd9745be6c17cd4e31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac706ef772ab315fd9745be6c17cd4e31">&#9670;&#160;</a></span>AddNewModels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AddNewModels </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classgz_1_1sim_1_1EntityComponentManager.html">EntityComponentManager</a> &amp;&#160;</td>
          <td class="paramname"><em>_ecm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save mappings for new models and their canonical links. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_ecm</td><td><a class="el" href="classgz_1_1sim_1_1EntityComponentManager.html" title="The EntityComponentManager constructs, deletes, and returns components and entities....">EntityComponentManager</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="classgz_1_1sim_1_1EntityComponentManager.html#aefabbc8810689e07ea9fdf21f4368f73">EntityComponentManager::EachNew()</a>, and <a class="elRef" href="http://en.cppreference.com/w/cpp/container/unordered_map/insert.html">unordered_map&lt; K, T &gt;::insert()</a>.</p>

</div>
</div>
<a id="a69a814ed4ba58a8e46daf0cebb4ace02" name="a69a814ed4ba58a8e46daf0cebb4ace02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69a814ed4ba58a8e46daf0cebb4ace02">&#9670;&#160;</a></span>CanonicalLinkModels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="elRef" href="http://en.cppreference.com/w/cpp/container/set.html">std::set</a>&lt; <a class="el" href="namespacegz_1_1sim.html#ad83694d867b0e3a9446b535b5dfd208d">Entity</a> &gt; &amp; CanonicalLinkModels </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacegz_1_1sim.html#ad83694d867b0e3a9446b535b5dfd208d">Entity</a>&#160;</td>
          <td class="paramname"><em>_canonicalLink</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a topological ordering of models that have a particular canonical link. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_canonicalLink</td><td>The canonical link </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The models that have this link as their canonical link, in topological order </dd></dl>

<p class="reference">References <a class="elRef" href="http://en.cppreference.com/w/cpp/container/unordered_map/end.html">unordered_map&lt; K, T &gt;::end()</a>, and <a class="elRef" href="http://en.cppreference.com/w/cpp/container/unordered_map/find.html">unordered_map&lt; K, T &gt;::find()</a>.</p>

</div>
</div>
<a id="ab64a528d9846b9d690e304c1c1d3c9b1" name="ab64a528d9846b9d690e304c1c1d3c9b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab64a528d9846b9d690e304c1c1d3c9b1">&#9670;&#160;</a></span>RemoveLink()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RemoveLink </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacegz_1_1sim.html#ad83694d867b0e3a9446b535b5dfd208d">Entity</a> &amp;&#160;</td>
          <td class="paramname"><em>_link</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove a link from the mapping. This method should be called when a link is removed from simulation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_link</td><td>The link to remove </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="elRef" href="http://en.cppreference.com/w/cpp/container/unordered_map/erase.html">unordered_map&lt; K, T &gt;::erase()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="CanonicalLinkModelTracker_8hh_source.html">CanonicalLinkModelTracker.hh</a></li>
</ul>
</div><!-- contents -->
      </div>
    </main>
  </div>
</body>
