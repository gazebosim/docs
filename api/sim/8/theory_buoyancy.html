<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="keywords" content="Gazebo Sim">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Gazebo Sim: $title</title>
    <script type="text/javascript" src="https://gazebosim.org/assets/doxygen/dynsections.js"></script>
    <script type="text/javascript" src="jquery.js"></script>
    <link rel="icon" type="image/x-icon" href="https://gazebosim.org/assets/icon/favicon.ico">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,300,100,500,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.deep_orange-blue.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"> </script>
    <link href="https://gazebosim.org/assets/doxygen/doxygen.css" rel="stylesheet" type="text/css">
  </head>
    <script type="text/javascript">
      /* Replace all the "permalink" &#9670;&nbsp; icons with a unicode link
        symbol.*/
      $(document).ready(function() {
        var elems = document.getElementsByClassName("permalink");
        for (var i = 0; i < elems.length; ++i) {
          elems[i].firstChild.innerHTML="&#x1f517;";
          elems[i].firstChild.style.fontSize="18px";
        }
      });
    </script>
  </head>
<body>
  <div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer">
    <div class="mdl-layout__drawer mdl-color--grey-100 mdl-color-text--blue-grey-50">
      <header class="mdl-color--grey-100">
        <a href="index.html"><img width="60px" src="https://gazebosim.org/assets/doxygen/gazebo_logo.svg"/></a>
        <h1 class="project_title">Gazebo Sim</h1>
        <h2>API Reference</h2>
        <div class="version">
        8.5.0
        </div>
      </header>
      <!-- NOTE: If you add a link to a doxygen generated page, then make
                 sure to update the required_html_fils list in
                 GzCreateDocs.cmake -->
      <nav class="gz-navigation mdl-navigation">
        <a class="mdl-navigation__link" href="tutorials.html">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">insert_drive_file</i>Tutorials</a>
        <a id="class_menu" class="mdl-navigation__link" href="#">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">library_books</i>Classes</a>
        <a id="namespaces_menu"class="mdl-navigation__link" href="#">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">toc</i>Namespaces</a>
        <a class="mdl-navigation__link" href="files.html">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">insert_drive_file</i>Files</a>
        <a class="mdl-navigation__link" target="_blank"
           href="http://gazebosim.org">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">launch</i>Gazebo Website</a>
      </nav>
      <!-- classes sub menu -->
      <ul for="class_menu" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect mdl-navigation">
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link" href="classes.html">Index</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="annotated.html">List</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="hierarchy.html">Hierarchy</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions.html">Members: All</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_func.html">Members: Functions</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_vars.html">Members: Variables</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_type.html">Members: Typedefs</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_enum.html">Members: Enumerations</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_eval.html">Members: Enumerator</a>
        </li>
      </ul>
      <!-- namespaces sub menu -->
      <ul for="namespaces_menu" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect mdl-navigation">
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespaces.html">List</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers.html">Members</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_func.html">Functions</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_type.html">Typedefs</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_vars.html">Variables</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_enum.html">Enumerations</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_eval.html">Enumerator</a>
        </li>
      </ul>
    </div>
    <main class="mdl-layout__content mdl-color--white">
    <div id="top">
<!-- Generated by Doxygen 1.9.1 -->
</div><!-- top -->
<div class="PageDoc"><div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md380"></a>
Overview</h1>
<p>This tutorial describes the theory of operation of the buoyancy plugin, an essential piece needed in most of the maritime simulations.</p>
<h1><a class="anchor" id="autotoc_md381"></a>
The buoyancy plugin</h1>
<p>This plugin is attached to the world to provide certain buoyancy to the vehicles. The buoyancy force opposes gravity exerted on the robot. The parameters of the plugin are configured via SDF in the world file. Check the <a href="https://github.com/gazebosim/gz-sim/blob/gz-sim8/src/systems/buoyancy/Buoyancy.hh">Buoyancy.hh</a> Gazebo header file for a complete description of all the accepted parameters.</p>
<p>The buoyancy plugin uses the <code>&lt;collision&gt;</code> elements of each SDF model to compute the volume of fluid displaced.</p>
<p>A common pattern for the maritime domain is to create very thin collision elements surrounding the vehicle (with low volume) and a separate collision element within the vehicle itself. The collection of low volume collision elements work as a shell to generate contacts when necessary. The extra collision element is only used to generate the aggregated desired air volume.</p>
<p>The outer set of collision elements in combination with the buoyancy collision element induce forces at the center of each <code>&lt;collision&gt;</code> element. If you followed the recommendation for creating low-volume outer collisions, the predominant force will be applied at the center of the buoyancy collision element. You can tune the location of that collision with the <code>&lt;pose&gt;</code> tag, to match your expected center of buoyancy.</p>
<p>The buoyancy force is proportional to the volume of air in the vehicle according to this equation:</p>
<p>$$volume\_neutral = \frac{mass}{waterDensity}$$</p>
<p>Pure water's density is <code>1000 kgm^-3</code> and seawater's density is <code>1025 kgm^-3</code> approximately. The mass of your vehicle is something that you'll decide or know by adding the mass of all your links. With that in mind, you'll be able to compute the volume of air that will make your vehicle neutrally buoyant.</p>
<p>If your vehicle is neutrally buoyant, <code>volume_neutral</code> should be the total amount of volume that you should have by adjusting the size of your <code>&lt;collision&gt;</code> elements. If your vehicle is not neutrally buoyant, this value will serve as a reference. If the total volume is smaller than <code>volume_neutral</code>, the vehicle will sink. Otherwise, it will move up.</p>
<p>The <code>&lt;GAZEBO_INSTALL_PATH&gt;/examples/worlds/buoyancy.sdf</code> SDF file (included with Gazebo) contains an example with three submarines. The first submarine is neutrally buoyant, the second sinks, and the third floats. Run the following command to see an example of a buoyancy plugin configured with a uniform fluid density:</p>
<div class="fragment"><div class="line">gz sim buoyancy.sdf</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md382"></a>
Graded buoyancy</h1>
<p>Often when simulating a maritime environment one may need to simulate both surface and underwater vessels. This means the buoyancy plugin needs to take into account two different fluids. One being water with a density of <code>~1000 kgm^-3</code> and another being air with a very light density of say <code>1 kgm^-3</code>. An example for such a configuration may be found in the <code>&lt;GAZEBO_INSTALL_PATH&gt;/examples/worlds/graded_buoyancy.sdf</code> world (included with Gazebo).</p>
<div class="fragment"><div class="line">gz sim graded_buoyancy.sdf</div>
</div><!-- fragment --><p>You should be able to see a sphere bobbing up and down undergoing simple harmonic motion on the surface of the fluid (this is expected behavior as the harmonic motion is usually damped by the hydrodynamic forces. See the hydrodynamics tutorial for an example of how to use it). The key part of this is</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">graded_buoyancy</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">default_density</span>&gt;1000&lt;/<span class="keywordtype">default_density</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">density_change</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">above_depth</span>&gt;0&lt;/<span class="keywordtype">above_depth</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">density</span>&gt;1&lt;/<span class="keywordtype">density</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">density_change</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">graded_buoyancy</span>&gt;</div>
</div><!-- fragment --><p>The default density tag says that by default the world has a fluid density of <code>1000 kgm^-3</code>. This essentially states that by default the world is filled with dihydrogen monoxide (aka water). The <code>&lt;density_change&gt;</code> tag essentially establishes the fact that there is a another fluid. The <code>&lt;above_depth&gt;</code> tag says that above z=0 there is another fluid with a different density. The density of that fluid is defined by the <code>&lt;density&gt;</code> tag. We will be simulating air with a fluid density of <code>1 kgm^-3</code>.</p>
<h1><a class="anchor" id="autotoc_md383"></a>
Known limitations</h1>
<p>When the buoyancy plugin is configured in <code>graded buoyancy mode</code>, only <code>&lt;box&gt;</code> and <code>&lt;sphere&gt;</code> collision geometries are supported. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
      </div>
    </main>
  </div>
</body>
