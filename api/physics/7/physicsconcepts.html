<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="keywords" content="Gazebo Physics">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Gazebo Physics: Physics simulation concepts</title>
    <script type="text/javascript" src="https://gazebosim.org/assets/doxygen/dynsections.js"></script>
    <script type="text/javascript" src="jquery.js"></script>
    <link rel="icon" type="image/x-icon" href="https://gazebosim.org/assets/icon/favicon.ico">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,300,100,500,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.deep_orange-blue.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"> </script>
    <link href="https://gazebosim.org/assets/doxygen/doxygen.css" rel="stylesheet" type="text/css">
  </head>
    <script type="text/javascript">
      /* Replace all the "permalink" &#9670;&nbsp; icons with a unicode link
        symbol.*/
      $(document).ready(function() {
        var elems = document.getElementsByClassName("permalink");
        for (var i = 0; i < elems.length; ++i) {
          elems[i].firstChild.innerHTML="&#x1f517;";
          elems[i].firstChild.style.fontSize="18px";
        }
      });
    </script>
  </head>
<body>
  <div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer">
    <div class="mdl-layout__drawer mdl-color--grey-100 mdl-color-text--blue-grey-50">
      <header class="mdl-color--grey-100">
        <a href="index.html"><img width="60px" src="https://gazebosim.org/assets/doxygen/gazebo_logo.svg"/></a>
        <h1 class="project_title">Gazebo Physics</h1>
        <h2>API Reference</h2>
        <div class="version">
        7.5.0
        </div>
      </header>
      <!-- NOTE: If you add a link to a doxygen generated page, then make
                 sure to update the required_html_fils list in
                 GzCreateDocs.cmake -->
      <nav class="gz-navigation mdl-navigation">
        <a class="mdl-navigation__link" href="tutorials.html">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">insert_drive_file</i>Tutorials</a>
        <a id="class_menu" class="mdl-navigation__link" href="#">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">library_books</i>Classes</a>
        <a id="namespaces_menu"class="mdl-navigation__link" href="#">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">toc</i>Namespaces</a>
        <a class="mdl-navigation__link" href="files.html">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">insert_drive_file</i>Files</a>
        <a class="mdl-navigation__link" target="_blank"
           href="http://gazebosim.org">
          <i class="mdl-color-text--grey-400 material-icons"
             role="presentation">launch</i>Gazebo Website</a>
      </nav>
      <!-- classes sub menu -->
      <ul for="class_menu" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect mdl-navigation">
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link" href="classes.html">Index</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="annotated.html">List</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="hierarchy.html">Hierarchy</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions.html">Members: All</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_func.html">Members: Functions</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_vars.html">Members: Variables</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_type.html">Members: Typedefs</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_enum.html">Members: Enumerations</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
             href="functions_eval.html">Members: Enumerator</a>
        </li>
      </ul>
      <!-- namespaces sub menu -->
      <ul for="namespaces_menu" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect mdl-navigation">
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespaces.html">List</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers.html">Members</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_func.html">Functions</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_type.html">Typedefs</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_vars.html">Variables</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_enum.html">Enumerations</a>
        </li>
        <li class="mdl-menu__item">
          <a class="mdl-navigation__link"
            href="namespacemembers_eval.html">Enumerator</a>
        </li>
      </ul>
    </div>
    <main class="mdl-layout__content mdl-color--white">
    <div id="top">
<!-- Generated by Doxygen 1.9.1 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Physics simulation concepts </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This tutorial introduces simulation concepts that are used in Gazebo Physics.</p>
<h2><a class="anchor" id="autotoc_md42"></a>
Prerequisites</h2>
<ul>
<li><a class="el" href="installation.html">Installation</a></li>
<li><a class="el" href="physicsengine.html">Use different physics engines</a></li>
<li><a href="https://gazebosim.org/docs/fortress/gui">Understand the GUI tutorial</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md43"></a>
Physics simulation features</h2>
<p>Here is a snapshot of simulation features supported by gz-physics:</p>
<ul>
<li>Collision detection: ODE, Bullet, various collision shapes and mesh</li>
<li>Kinematics; joint, arbitrary body shapes, various kinematic states like transmoration, velocity, acceleration etc., inverse kinematics</li>
<li>Dynamics: joint constraints, mass matrix, gravity, forces and frictions, closed-loop structures</li>
</ul>
<p>Gazebo adopts SDFormat structure to describe visual elements and also the dynamic physics aspects. To get started on SDFormat 1.7, refer to this <a href="http://sdformat.org/spec?ver=1.7&amp;elem=sdf">SDFormat specification</a>. For a comprehensive tutorial for constructing your robot model from SDFormat, refer to this <a href="https://gazebosim.org/docs/fortress/building_robot">Building robot</a> tutorial.</p>
<h2><a class="anchor" id="autotoc_md44"></a>
Physics concepts in Gazebo simulation</h2>
<p>In this tutorial, we will show how to manipulate and visualize some physics aspects using demos on Gazebo.</p>
<p>All demos can be found in <a href="https://github.com/gazebosim/gz-sim/blob/gz-sim8/examples/worlds/">gz-sim/examples/worlds</a> folder.</p>
<h3><a class="anchor" id="autotoc_md45"></a>
Differential drive</h3>
<p>This demo world demonstrates how we can control simulated differential drive on cars depending on physics engines and visualize the collision concept. To run the demo world, download the SDFormat file by:</p>
<div class="fragment"><div class="line">wget https://raw.githubusercontent.com/gazebosim/gz-sim/gz-physics7/examples/worlds/diff_drive.sdf -P ~</div>
<div class="line">wget https://raw.githubusercontent.com/gazebosim/gz-sim/gz-physics7/examples/worlds/velocity_control.sdf -P ~</div>
</div><!-- fragment --><p>Then run the simulation:</p>
<div class="fragment"><div class="line"># [Optional] first source the directory if installed by source</div>
<div class="line">source ~/workspace/install/setup.bash</div>
<div class="line"> </div>
<div class="line"># then run diff_drive demo with Dartsim</div>
<div class="line">gz sim diff_drive.sdf  # default Dartsim</div>
<div class="line"> </div>
<div class="line"># or run demo with TPE</div>
<div class="line">gz sim velocity_control.sdf --physics-engine gz-physics-tpe-plugin # specify TPE as physics engine</div>
</div><!-- fragment --><p>To control the car movement, in a separate terminal window, we publish a Twist message using Gazebo Transport library:</p>
<div class="fragment"><div class="line">gz topic -t &quot;/model/vehicle_blue/cmd_vel&quot; -m gz.msgs.Twist -p &quot;linear: {x: 1.0}, angular: {z: 0.5}&quot;</div>
</div><!-- fragment --><p>Then press the Play button to start the simulation. This command tells the car to move in its coordinate frame with velocity 1.0 meter per second in the X-axis and angular velocity of 0.5 radians per second in Z-axis.</p>
<p>Note that the mechanism to move the car is different depending on the used physics engine, see <a class="el" href="physicsengine.html">Use different physics engines</a> for details on how to change physics engine used by simulation.</p>
<p>Dartsim moves the car by applying force on the joints, whereas TPE directly set velocity on the model.</p>
<h4><a class="anchor" id="autotoc_md46"></a>
Monitor the model and link pose</h4>
<p>We can monitor the model pose by selecting the moving car and then select the drop-down list <code>Pose</code>. Moreover, we could also read the model links' poses relative to their parent link by selecting the corresponding link on the model tree:</p>
<div class="image">
<img src="img/diff_drive_link.gif" alt="" width="100%"/>
</div>
<p>Note that using the model tree as shown in the above gif, we can view the parameters and properties such as <code>visual</code> or <code>collision</code> of each link or joint in the model. For more detail about the kinematics of the model tree, see this <a href="http://sdformat.org/tutorials?tut=spec_model_kinematics&amp;cat=specification&amp;">tutorial</a>.</p>
<h4><a class="anchor" id="autotoc_md47"></a>
Collision effect</h4>
<p>Gazebo also simulates realistic collision effect. While the <code>vehicle_blue</code> car is moving in a circle, we can move the <code>vehicle_green</code> to be on <code>vehicle_blue</code>'s upcoming path. The blue car will then push the green car in the following demo.</p>
<div class="image">
<img src="img/diff_drive_collision.gif" alt="" width="100%"/>
</div>
<p>To see where these collision parameters are set in SDFormat and how it works, please see this <a href="http://sdformat.org/tutorials?tut=spec_shapes&amp;cat=specification&amp;">SDFormat tutorial</a>.</p>
<h3><a class="anchor" id="autotoc_md48"></a>
Lift Drag</h3>
<p>The Lift Drag demo world shows how joint force, torque, and pressure are supported in Gazebo Physics. To run the demo, download by:</p>
<div class="fragment"><div class="line">wget https://raw.githubusercontent.com/gazebosim/gz-sim/gz-sim8/examples/worlds/lift_drag.sdf -P ~</div>
</div><!-- fragment --><p>Run demo in Gazebo by:</p>
<div class="fragment"><div class="line">gz sim lift_drag.sdf</div>
</div><!-- fragment --><p>To see how the rotor lifts the cube due to wind force pressure, in a separate terminal window, we can publish a Double message represeting the torque (Nm) applying to the rotor rod axis:</p>
<div class="fragment"><div class="line">gz topic -t &quot;/model/lift_drag_demo_model/joint/rod_1_joint/cmd_force&quot; -m gz.msgs.Double  -p &quot;data: 0.7&quot;</div>
</div><!-- fragment --><p>Then please press Play button to start the simulation.</p>
<div class="fragment"><div class="line">gz topic -t &quot;/model/lift_drag_demo_model/joint/rod_1_joint/cmd_force&quot; -m gz.msgs.Double  -p &quot;data: 0.0&quot;</div>
</div><!-- fragment --><p>You will see the cube drops due to no lift force from support torque on the rod, and the blades will stop after some time due to friction.</p>
<div class="image">
<img src="img/lift_drag_torque.gif" alt="" width="100%"/>
</div>
<p>Several simulation features come into effect in this demo. The lift and drag force is computed by taking the wind pressure, mass of the cube, and gravity into account, and the resulting force is exerted on multiple joints. Dartsim is used to power this demo.</p>
<h3><a class="anchor" id="autotoc_md49"></a>
Buoyancy</h3>
<p>This demo world shows how buoyancy is supported in Gazebo Physics. This world contains the following three models:</p>
<ol type="1">
<li>submarine: A simple submarine model that floats in place.</li>
<li>submarine_sinking: A simple submarine model that is not buoyant and sinks.</li>
<li>submarine_buoyant: A simple submarine model that is buoyant and floats.</li>
</ol>
<p>To run the demo, download the Buoyancy demo to your home folder by:</p>
<div class="fragment"><div class="line">wget https://raw.githubusercontent.com/gazebosim/gz-sim/gz-sim8/examples/worlds/buoyancy.sdf -P ~</div>
</div><!-- fragment --><p>Run demo on Gazebo by:</p>
<div class="fragment"><div class="line">gz sim buoyancy.sdf</div>
</div><!-- fragment --><p>After pressing the Play button, demo will run as below:</p>
<div class="image">
<img src="img/buoyancy.gif" alt="" width="100%"/>
</div>
<p>The buoyancy concept is implemented by simulating fluid density and applying the force on the object in the fluid proportional to its volume. Hence, you can change the model buoyancy by modifying its inertia, see <a href="http://sdformat.org/spec?ver=1.7&amp;elem=link">SDFormat link specification</a> on how to do that.</p>
<h3><a class="anchor" id="autotoc_md50"></a>
Pendulum</h3>
<p>This demo world demonstrates how simulated inertia and gravity affect the object movement by showing free swing of the pendulum. Download the Pendulum demo to your home folder by:</p>
<div class="fragment"><div class="line">wget https://raw.githubusercontent.com/gazebosim/gz-sim/gz-sim8/examples/worlds/video_record_dbl_pendulum.sdf -P ~</div>
</div><!-- fragment --><p>and start the Pendulum demo on Gazebo by:</p>
<div class="fragment"><div class="line">gz sim video_record_dbl_pendulum.sdf</div>
</div><!-- fragment --><p>After pressing the Play button, you will see that the pendulum will oscillate around its main revolute joint forever due to lack of friction (it is undeclared in the SDFormat file).</p>
<div class="image">
<img src="img/pendulum.gif" alt="" width="100%"/>
</div>
<p>The oscillation period or the max angular speed of the joint will change if we modify the inertia of the rods. According to the demo below, you will see that gravity is defined as -9.8 m/s^2 on the Z-axis. Refer to <a href="http://sdformat.org/spec?ver=1.7&amp;elem=link">link specification</a> for modifying the inertia and mass of the links.</p>
<h3><a class="anchor" id="autotoc_md51"></a>
Multicopter</h3>
<p>This demo world shows how Gazebo Physics supports gravity, actuators and inertia to control object velocity. Download the Multicopter demo to your home folder by:</p>
<div class="fragment"><div class="line">wget https://raw.githubusercontent.com/gazebosim/gz-sim/gz-sim8/examples/worlds/multicopter_velocity_control.sdf -P ~</div>
</div><!-- fragment --><p>and start the Multicopter demo on Gazebo by:</p>
<div class="fragment"><div class="line">gz sim multicopter_velocity_control.sdf</div>
</div><!-- fragment --><p>To control the multicopter to ascend and hover, in a separate terminal window, send a Twist message to command the <code>X3</code> multicopter ascending 0.1 m.s as follow:</p>
<div class="fragment"><div class="line">gz topic -t &quot;/X3/gazebo/command/twist&quot; -m gz.msgs.Twist -p &quot;linear: {x:0 y: 0 z: 0.1} angular {z: 0}&quot;</div>
</div><!-- fragment --><p>then hovering:</p>
<div class="fragment"><div class="line">gz topic -t &quot;/X3/gazebo/command/twist&quot; -m gz.msgs.Twist -p &quot; &quot;</div>
</div><!-- fragment --><div class="image">
<img src="img/hover.gif" alt="" width="100%"/>
</div>
<p>Do the same for the <code>X4</code> multicopter. After pressing the Play button, you will see both of the multicopters will ascend, this demonstrates how the physics engine utilizes model kinematics and dynamics to support simulating complex model and its controller. For more details about the multicopter controller, please see <a href="https://github.com/gazebosim/gz-sim/blob/gz-sim8/src/systems/multicopter_control/MulticopterVelocityControl.cc">MulticopterVelocityControl.cc</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
      </div>
    </main>
  </div>
</body>
